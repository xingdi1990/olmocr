for all  $r \in \mathbb{R}$  and  $\alpha \in \Phi$ . We also have a filtration of the maximal torus T by setting

$$T_0 \coloneqq \{ t \in T \mid \forall \chi \in X^*(T), \, \omega(\chi(t)) = 0 \}$$

and

$$T_r \coloneqq \{t \in T_0 \mid \forall \chi \in X^*(T), \, \omega(\chi(t) - 1) \ge r\}$$

for all  $r \in \mathbb{R}$ .

2.1. **The apartment.** Let  $N \leq G$  be generated by  $T$  and  $\zeta_{\alpha} \begin{pmatrix} 0 & 1 \\ -1 & 0 \end{pmatrix}$  for all  $\alpha \in \Phi$ . Then  $N = Z_G(T)$  and the quotient  $N/T$  is isomorphic to the (finite) Weyl group W of G. We write  $V \coloneqq X_*(T) \otimes_{\mathbb{Z}} \mathbb{R}$ . It is clear that there is an action of  $W$  on  $V$  by linear transformations. This action can be extended to an action of  $N$ on V by affine transformations. When viewing V as an affine space over itself, we denote it by  $\mathbb{A}$ . It is called the *apartment of G* corresponding to the torus T. We will find it convenient to fix an origin o for  $\mathbb{A}$ , which corresponds to the origin of V. The action of N on A is via the quotient  $N/T_0$ , which is isomorphic to a group  $\widehat{W}$  called the *affine Weyl group* of G. The subset of  $\widehat{W}$  acting via affine reflections gives rise to a set of affine hyperplanes in  $\mathbb{A}$  and by taking the closed half-spaces on both sides of all those hyperplanes, we obtain an *affine root system*  $\Sigma$  in the sense of [3]. Given  $a \in \Sigma$  the hyperplane  $\partial a$  is called a *wall*. Every element  $a \in \Sigma$  is of the form

$$a = \alpha + r \coloneqq \{x \in \mathbb{A} \mid \alpha(x) + r \ge 0\}$$

for some  $\alpha \in \Phi$  and  $r \in \mathbb{Z}$  and every set of this form is in  $\Sigma$ . Here we are abusing notation by writing  $\alpha + r$  both for the affine function  $x \mapsto \alpha(x) + r$  on A and for the half-space it defines. We obtain a surjective map  $\Sigma \to \Phi : a \mapsto \hat{a} = \alpha$ . The action of N on A induces an action of N on  $\Sigma$ . Let  $a, b \in \Sigma$ , then the walls  $\partial a$  and  $\partial b$  are called *parallel* if  $\hat{a} = \pm \hat{b}$ , moreover we say that  $\partial a$  is parallel to  $\hat{a}$ .

An equivalence relation on  $\mathbb{A}$  is now obtained by specifying that two points are equivalent when the sets of affine roots they are contained in are the same. The closures of the equivalence classes under this relation are called *facets* and they give rise to a simplicial structure on  $\mathbb{A}$ , where the equivalence classes are the open cells. The simplices of maximal dimension are called *alcoves* and they are of dimension d. Any alcove is a fundamental domain for the action of N on  $\mathbb{A}$ . Because we have fixed a pinning of G and a base  $\Pi$  for our root system, there is a canonical alcove  $C$  given by

$$C \coloneqq \{x \in \mathbb{A} \mid \text{for } 1 \le i \le d, \ \alpha_i(x) \ge 0 \text{ and } \alpha_0(x) \le 1\}.$$

The vertices of C are  $v_0 = 0$  and  $v_1, \ldots, v_d$ . Here the  $v_i$  with  $i > 0$  are given by  $\alpha_i(v_i) = 0$  for all  $j \neq i, 0$  and  $\alpha_0(v_i) = 1$ . We now expand  $\alpha_0$  in the basis given by  $\n\Pi\n$  and find that

$$\alpha_0 = \sum_{i=1}^d c_i \alpha_i$$

for some positive integers  $c_i$ . We define  $\omega_i := c_i v_i$  and then we note that  $\alpha_i(\omega_i) =$  $\delta_{ij}$ . Thus the  $\omega_i$  form a basis for V dual to  $\Pi$  and they are called the fundamental  $coweights.$ 

Associated to C there is a fundamental Weyl chamber  $C^+ := \mathbb{R}_{>0} \cdot C$ . Because C is a fundamental domain for the action of N on A, every vertex x in A is Gconjugate to exactly one of the  $v_i$ , which gives rise to a map  $\lambda : \mathbb{A}_0 \to \{0, \ldots, d\}$