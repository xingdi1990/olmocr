Thus, the necessary optimality condition for a two-player game provides the conditions under which both players' controls are optimal in response to each other's strategies. Each player's control must satisfy the condition that the derivative of the Hamiltonian with respect to their control vanishes almost everywhere, ensuring that the strategy of each player is optimal given the strategy of the other player.

Consider the variation of the functional  $J_1$  with respect to the control  $u_1$ . We  $Proof.$ compute the derivative:

$$\left. \frac{d}{d\epsilon} J_1(u_1 + \epsilon v_1, u_2) \right|_{\epsilon = 0}.$$

Expanding the objective functional:

$$\frac{d}{d\epsilon}J_1(u_1+\epsilon v_1,u_2)\Big|_{\epsilon=0} = \lim_{\epsilon \to 0} \frac{1}{\epsilon} \mathbb{E}\Bigg[\int_{R_Z} \Big\{f_1(\zeta,Y^{(u_1+\epsilon v_1,u_2)}(\zeta),u_1(\zeta)+\epsilon v_1(\zeta),u_2(\zeta))\\ -f_1(\zeta,Y^{(u_1,u_2)}(\zeta),u_1(\zeta),u_2(\zeta))\Big\} d\zeta + g_1(Y^{(u_1+\epsilon v_1,u_2)}(Z)) - g_1(Y^{(u_1,u_2)}(Z))\Bigg].$$

Using the first-order expansion:

$$\frac{d}{d\epsilon} J_1(u_1 + \epsilon v_1, u_2) \Big|_{\epsilon=0} = \mathbb{E} \Bigg[ \int_{R_Z} \Big\{ \frac{\partial f_1}{\partial y} (\zeta, Y^{(u_1, u_2)}(\zeta), u_1(\zeta), u_2(\zeta)) G_1(\zeta) \\ + \frac{\partial f_1}{\partial u_1} (\zeta, Y^{(u_1, u_2)}(\zeta), u_1(\zeta), u_2(\zeta)) v_1(\zeta) \Big\} d\zeta + \frac{\partial g_1}{\partial y} (Y^{(u_1, u_2)}(Z)) G_1(Z) \Bigg],$$

where  $G_1$  is the variation in the system's state due to the change in control. We now decompose it into two terms:

$$\frac{d}{d\epsilon} J_1(u_1 + \epsilon v_1, u_2) \Big|_{\epsilon = 0} = I_1 + I_2,$$

where

$$I_{1} = \mathbb{E}\Bigg[\int_{R_{Z}} \Big(\frac{\partial H_{1}}{\partial y}(\zeta) - \frac{\partial \alpha}{\partial y}(\zeta)p_{1}(\zeta) - \frac{\partial \beta}{\partial y}(\zeta)q_{1}(\zeta) - (L_{1}\star\frac{\partial \alpha}{\partial y})(\zeta)\Big)G_{1}(\zeta)d\zeta$$
$$+ \int_{R_{Z}} \Big(\frac{\partial H_{1}}{\partial u_{1}}(\zeta) - \frac{\partial \alpha}{\partial u_{1}}(\zeta)p_{1}(\zeta) - \frac{\partial \beta}{\partial u_{1}}(\zeta)q_{1}(\zeta) - (L_{1}\star\frac{\partial \alpha}{\partial u_{1}})(\zeta)\Big)v_{1}(\zeta)d\zeta\Bigg],$$