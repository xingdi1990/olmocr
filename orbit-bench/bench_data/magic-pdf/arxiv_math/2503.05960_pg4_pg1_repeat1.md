We thank Amol Aggarwal, Andrew Hardt and Travis Scrimshaw for helpful conversations about the groupoid.  

# 2. Groupoids  

A groupoid is a set $G$ with a partially defined composition. This consists of a map $\mu :$ $S \longrightarrow G$ , where $S$ is a subset of $G \times G$ . If $a , b \in G$ we say that the product $a \star b$ is defined if $( a , b ) \in S$ , and then we write $a \star b = \mu ( a , b )$ . The groupoid is also required to have an “inverse map” $x \mapsto x ^ { \prime }$ from $G  G$ . The inverse map is more commonly denoted as $x \mapsto x ^ { - 1 }$ , but we will be concerned with a groupoid whose elements are matrices, and we will reserve the notation $x ^ { - 1 }$ for the matrix inverse. The following axioms are required.  

Axiom 1 (Associative Law). If $a \star b$ and $b \star c$ are defined then $( a \star b ) \star c$ and $a \star ( b \star c )$ are defined, and they are equal.  

We say that $a \star b \star c$ is defined if $a \star b$ and $b { \star c }$ are defined, and then we denote $( a \star b ) \star c =$ $a \star ( b \star c )$ as $a \star b \star c$ .  

Axiom 2 (Inverse). The compositions $a \star a ^ { \prime }$ and $a ^ { \prime } \star a$ are always defined. Thus if $a \star b$ is defined, then $a \star b \star b ^ { \prime }$ is defined, and this is required to equal $a$ . Similarly $a ^ { \prime } \star a \star b$ is defined, and this is required to equal $b$ .  

Example 2.1. A category $\mathcal { C }$ is small if its class of objects is a set. A small category is a groupoid category if every morphism is an isomorphism. Assuming this, the disjoint union  

$$
G = \bigsqcup _ { A , B \in { \mathcal C } } \operatorname { H o m } ( A , B )
$$  

is a groupoid, with the $\star$ operation being composition: thus if $a \in \mathrm { H o m } ( A , B )$ and $b \in$ ${ \mathrm { H o m } } ( C , D )$ , then $a \star b$ is defined if and only if $B = C$ . The groupoid axioms are clear.  

Lemma 2.2. In a groupoid, we have $( a ^ { \prime } ) ^ { \prime } = a$ . Moreover if $a \star b$ is defined then so is $b ^ { \prime } \star a ^ { \prime }$ and $( a \star b ) ^ { \prime } = b ^ { \prime } \star a ^ { \prime }$ .  

Proof. Since $( a ^ { \prime } ) ^ { \prime } { \star } a ^ { \prime }$ and $a ^ { \prime } { \star } a$ are both defined, by the Associative Law the product $( a ^ { \prime } ) ^ { \prime } { \star } a ^ { \prime } { \star } a$ is defined, and using the Inverse Axiom, this equals both $( a ^ { \prime } ) ^ { \prime }$ and $a$ . For the second assertion, assume $a \star b$ is defined. It follows from the axioms that  

$$
( a \star b ) ^ { \prime } = ( a \star b ) ^ { \prime } \star a \star b \star b ^ { \prime } \star a ^ { \prime } = b ^ { \prime } \star a ^ { \prime } .
$$  

Given a groupoid $G$ , let us say an element $A$ is idempotent if $A { \star } A$ is defined and $A { \star } A = A$ .  

Lemma 2.3. An element $A \in G$ is an idempotent if and only if $A = g \star g ^ { \prime }$ for some $g \in G$ If $A$ is idempotent then $A = A ^ { \prime }$ .  

Proof. It is easy to check that $g \star g ^ { \prime }$ is idempotent. Conversely if $A$ is idempotent, then $A = A { \star } A ^ { \prime }$ since $A = A \star A = A \star A \star A ^ { \prime } = A \star A ^ { \prime }$ , and so $A$ can be written $g \star g ^ { \prime }$ with $g = A$ . Now if $A = g \star g ^ { \prime }$ then $A = A ^ { \prime }$ as a consequence of Lemma 2.2. □  

Lemma 2.4. If $g \in G$ then there are unique idempotents $A$ and $B$ such that $g = g \star A$ and $g = B \star g$ .  

Proof. We can take $A = g ^ { \prime } \star g$ , and this is an idempotent such that $g \star A = g$ . Conversely if $A ^ { \prime }$ is any other element such that $g \star A ^ { \prime } = g$ , then $g ^ { - 1 } \star g = g ^ { - 1 } \star g \star A ^ { \prime } = A ^ { \prime }$ , so $A ^ { \prime } = A$ . The statements about $B$ are proved similarly. □  