permutes the Z7-component at h by a particular even permutation if and only if hs = hs' .

Once we can check for equality of nodes, the proof is again similar to the proof of Theorem 4.1, but we check for an accepting tree on the tree obtained by contracting paths. We will construct versions of the ¢-maps that send information over paths where the tree is not branching, and goodness checks should similarly jump over paths. In the remainder of the proof, we explain how these variants can be constructed.

Note that the contracted paths are of length nd at most. We explain first how to deal with a single length ?. A minor modification of Equation 1 gives an automorphism f that performs T in the Z7-component at h if and only if ha contains s. Namely, we simply replace the conjugating partial shifts of the third track by their lth power.

However, we need to check that the intermediate nodes on the path, i.e. har for l' < l, do not branch, and that ha does branch. This can be done since as we showed above, we have in our group automorphisms that permute Zr in an arbitrary way depending on whether a given relative node is branching. Specifically, one can use commutator formulas and divide-and-conquer to obtain a polynomial-norm automorphism that cancels the effect of f if the branching is not correct.

The resulting automorphisms can be simply composed for all distinct & to obtain the desired analogs of the ¢-maps, as their supports are distinct (the Øth map can only act nontrivially when the non-branching prefix of the tree starting from h is of length exactly l).

To allow goodness checks to jump over paths, the argument is direct from Barrington's theorem (taking the maps that check for branching nodes to be to be among the generators).

## 7 PSPACE-hardness for general groups under the Gap Conjecture

A sequence bk is at most polynomial if bk = O(kd) for some d. A function by is at least stretched exponential if we have by = O(e" ) for some ß > 0, and ß is called the degree. We again recall the version of Gap Conjecture relevant to us, so let ß E (0, 1).

Conjecture 7.1 (Conjecture C\*(B) of Grigorchuk). A group either has at most polynomial growth, or at least stretched exponential growth with degree B.

We next show that in any group with stretched exponential growth in the above sense, for sufficiently large k we can find a subtree that fits in a ball of radius polynomial in k, has sufficient branching, and furthermore we can encode this tree in a finite-support configuration of a particular SFT X.

We are mainly interested in full shifts, so we will work with SFTs that contain points of finite support, and our first result constructs finite-support points which we will use as markers. This does not require any assumptions on the group. Similar marker constructions can be performed under other (including some strictly weaker) assumptions. See e.g. [2, 19] for such marker constructions.