We thank Amol Aggarwal, Andrew Hardt and Travis Scrimshaw for helpful conversations about the groupoid.

## 2. GROUPOIDS

A groupoid is a set G with a partially defined composition. This consists of a map u : S -> G, where S is a subset of G x G. If a, b E G we say that the product a +b is defined if (a, b) E S, and then we write axb = u(a, b). The groupoid is also required to have an "inverse map" x -> x' from G -> G. The inverse map is more commonly denoted as x -> x -1, but we will be concerned with a groupoid whose elements are matrices, and we will reserve the notation x - for the matrix inverse. The following axioms are required.

Axiom 1 (Associative Law). If a \* b and b x c are defined then (a \* b) \* c and a \* (b x c) are defined, and they are equal.

We say that a \* b x c is defined if a + b and b + c are defined, and then we denote (a + b) + c = a \* (b \* c) as a \* b \* c.

Axiom 2 (Inverse). The compositions a + a and a + a are always defined. Thus if a + b is defined, then a x b x b is defined, and this is required to equal a. Similarly a +a + b is defined, and this is required to equal b.

Example 2.1. A category C is small if its class of objects is a set. A small category is a groupoid category if every morphism is an isomorphism. Assuming this, the disjoint union

$$G = \bigsqcup\_{A, B \in \mathcal{C}} \operatorname{Hom}(A, B)$$

is a groupoid, with the \* operation being composition: thus if a E Hom(A, B) and b E Hom(C, D), then a \* b is defined if and only if B = C. The groupoid axioms are clear.

Lemma 2.2. In a groupoid, we have (a') = a. Moreover if a + b is defined then so is b + a' and (a \* b)' = b' \* a' .

Proof. Since (a')'+a' and a'+a are both defined, by the Associative Law the product (a') +a' +a is defined, and using the Inverse Axiom, this equals both (a)) and a. For the second assertion, assume a \* b is defined. It follows from the axioms that

$$(a \star b)' = (a \star b)' \star a \star b \star b' \star a' = b' \star a'. \tag{\square}$$

Given a groupoid G, let us say an element A is idempotent if A+A is defined and A+A = A.

Lemma 2.3. An element A E G is an idempotent if and only if A = g + g for some g E G. If A is idempotent then A = A'.

Proof. It is easy to check that g \* g' is idempotent. Conversely if A is idempotent, then A = A \* A since A = A \* A = A \* A \* A , and so A can be written g \* g with g = A. Now if A = g \* g' then A = A' as a consequence of Lemma 2.2. 0

Lemma 2.4. If q E G then there are unique idempotents A and B such that g = q + A and g = B \* g.

Proof. We can take A = g + g, and this is an idempotent such that g + A = g. Conversely if A' is any other element such that g \* A' = g, then g- + g = g + g + A' = A', so A' = A. The statements about B are proved similarly.